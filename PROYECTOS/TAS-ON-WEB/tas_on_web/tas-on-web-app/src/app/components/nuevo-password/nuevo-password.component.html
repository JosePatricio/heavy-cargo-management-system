<ngx-loading [show]="loading"></ngx-loading>
<div class="container" style="margin-top: 20px">
  <div class="row">
    <div class="col-12 col-md-6 offset-md-3">
      <form novalidate #forma="ngForm">

        <div class="pb-3 pt-1">
          <img class="mx-auto d-block" src="../../../assets/images/logo/logo-texto.png" alt="Tas-On">
        </div>
        <div class="text-center mb-4">
          <h4>Cambiar contrase単a</h4>
        </div>
        <hr>
        <div class="form-group">
          <label for="username">Usuario</label>
          <input type="text" class="form-control" id="username" name="username"
                 [(ngModel)]="password.username"
                 #username="ngModel" required maxlength="20" [disabled]="true"
                 [ngClass]="{'is-invalid': username.errors?.required && username.touched}">
          <div *ngIf="username.errors?.required" class="invalid-feedback">{{appConfig.msgRequerido}}</div>
        </div>
        <div class="form-group">
          <label for="oldPassword">Contrase単a actual</label>
          <input [type]="tipoContrasenaActual" class="form-control" id="oldPassword"
                 name="oldPassword" [(ngModel)]="password.oldPassword"
                 #oldPassword="ngModel" required maxlength="20"
                 [ngClass]="{'is-invalid': oldPassword.errors?.required && oldPassword.touched}">
          <i *ngIf="!mostrarContrasenaActual" class="fas fa-eye show-hide-password" (click)="showPasswordActual()"></i>
          <i *ngIf="mostrarContrasenaActual" class="fas fa-eye-slash show-hide-password" (click)="hidePasswordActual()"></i>
          <div *ngIf="oldPassword.errors?.required" class="invalid-feedback">{{appConfig.msgRequerido}}</div>
        </div>
        <div class="form-group">
          <label for="newPassword">Nueva contrase単a</label>
          <input [type]="tipoContrasenaNueva" class="form-control" id="newPassword"
                 name="newPassword" [(ngModel)]="password.newPassword"
                 #newPassword="ngModel" required maxlength="20" validateEqual="confirmPassword" reverse="true"
                 [ngClass]="{'is-invalid': newPassword.errors?.required && newPassword.touched}">
          <i *ngIf="!mostrarContrasenaNueva" class="fas fa-eye show-hide-password" (click)="showPasswordNueva()"></i>
          <i *ngIf="mostrarContrasenaNueva" class="fas fa-eye-slash show-hide-password" (click)="hidePasswordNueva()"></i>
          <div *ngIf="newPassword.errors?.required" class="invalid-feedback">{{appConfig.msgRequerido}}</div>
        </div>
        <div class="form-group">
          <label for="confirmPassword">Confirmar contrase単a</label>
          <input [type]="tipoContrasenaConfirmar" class="form-control" id="confirmPassword"
                 name="confirmPassword" [(ngModel)]="password.confirmPassword"
                 #confirmPassword="ngModel" required maxlength="20" validateEqual="newPassword" reverse="false"
                 [ngClass]="{'is-invalid': confirmPassword.errors?.required && confirmPassword.touched}">
          <i *ngIf="!mostrarContrasenaConfirmar" class="fas fa-eye show-hide-password" (click)="showPasswordConfirmar()"></i>
          <i *ngIf="mostrarContrasenaConfirmar" class="fas fa-eye-slash show-hide-password" (click)="hidePasswordConfirmar()"></i>
          <div *ngIf="confirmPassword.errors?.required" class="invalid-feedback">{{appConfig.msgRequerido}}</div>
          <small [hidden]="confirmPassword.valid || (confirmPassword.pristine && !forma.submitted)" class="error-input">
            Contrase&ntilde;as no coinciden
          </small>
        </div>
        <div class="mb-4">
          <button type="button" class="btn btn-primary col-md-4 col-lg-3 mt-2" [disabled]="!forma.valid"
                  (click)="updatePassword()">Aceptar
          </button>
          <button type="button" class="btn btn-secondary col-md-4 col-lg-3 mt-2" (click)="return()">Cancelar</button>
        </div>
      </form>
    </div>
  </div>
</div>
