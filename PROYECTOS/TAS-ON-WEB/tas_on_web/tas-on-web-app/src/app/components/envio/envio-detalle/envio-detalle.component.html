<simple-notifications [options]="options" (onDestroy)="destroyed($event)"></simple-notifications><ngx-loading [show]="loading"></ngx-loading><form novalidate #forma="ngForm">  <div class="card">    <h5 class="card-header">Datos del envío</h5>    <div class="card-body">      <div class="row">        <div class="col-md-6">          <h6 class="card-subtitle">Estado</h6>          <p class="card-text">{{envio.envioEstado}}</p>        </div>        <div class="col-md-6">          <h6 class="card-subtitle">Tipo de envío</h6>          <p class="card-text">{{envio.envioTipo == "G" ? "Guía": envio.envioTipo == "C" ? "Cobro" : envio.envioTipo == "D" ? "Devolución" : "ERROR"}}</p>        </div>        <div class="col-md-6">          <h6 class="card-subtitle">Cliente</h6>          <p class="card-text">{{envio.envioClienteRazonSocial}}</p>        </div>        <div class="col-md-6">          <h6 class="card-subtitle">Número de documento</h6>          <p class="card-text">{{envio.envioNumeroDocumento}}</p>        </div>        <div class="col-md-6">          <h6 class="card-subtitle">Piezas</h6>          <p class="card-text">{{envio.envioNumeroPiezas}}</p>        </div>        <div class="col-md-6">          <h6 class="card-subtitle">Estibadores</h6>          <p class="card-text">{{envio.envioNumeroEstibadores}}</p>        </div>        <div class="col-md-6">          <h6 class="card-subtitle">Conductor</h6>          <p class="card-text">{{envio.envioConductor}}</p>        </div>        <div class="col-md-6">          <h6 class="card-subtitle">Vehículo</h6>          <p class="card-text">{{envio.envioVehiculo}}</p>        </div>        <div class="col-md-6" *ngIf="envio.envioPago">          <h6 class="card-subtitle">Pago</h6>          <p class="card-text">$ {{envio.envioPago}}</p>        </div>        <div class="col-md-6" *ngIf="envio.envioObservaciones">          <h6 class="card-subtitle">Observaciones</h6>          <p class="card-text">{{envio.envioObservaciones}}</p>        </div>      </div>    </div>  </div>  <div class="card">    <h5 class="card-header">Origen</h5>    <div class="card-body">      <h6 class="card-subtitle">Ciudad</h6>      <p class="card-text">{{envio.envioOrigen}}</p>      <h6 class="card-subtitle">Dirección</h6>      <p class="card-text">{{envio.envioDireccionOrigen}}</p>      <h6 class="card-subtitle">Fecha recolección</h6>      <p class="card-text">{{envio.envioFechaRecoleccion  | date: appConfig.formatoFechaHora}}</p>    </div>  </div>  <div class="card">    <h5 class="card-header">Destino</h5>    <div class="card-body">      <h6 class="card-subtitle">Ciudad</h6>      <p class="card-text">{{envio.envioDestino}}</p>      <h6 class="card-subtitle">Dirección</h6>      <p class="card-text">{{envio.envioDireccionDestino}}</p>      <h6 class="card-subtitle">Fecha entrega</h6>      <p class="card-text">{{envio.envioFechaEntrega  | date: appConfig.formatoFechaHora}}</p>    </div>  </div>  <div class="card" *ngIf="imagenesRecoleccionIds.length>0">    <h5 class="card-header">Fotos de recolección ({{imagenesRecoleccionIds.length}})</h5>    <div class="card-body">      <div class="contenedor-imagenes">        <img class="imagen-oferta" alt="Imagen de recolección"             *ngFor="let imagen of imagenesRecoleccion; index as i" [src]="imagen" (click)="verImagen(i, true)">        <button type="button" (click)="verFotosRecoleccion(); clickedVerFotosRecoleccion = true;" [disabled]="clickedVerFotosRecoleccion" class="btn btn-secondary" *ngIf="imagenesRecoleccion.length == 0">Ver fotos</button>      </div>    </div>  </div>  <div class="card" *ngIf="imagenesEntregaIds.length>0">    <h5 class="card-header">Fotos de entrega ({{imagenesEntregaIds.length}})</h5>    <div class="card-body">      <div class="contenedor-imagenes">        <img class="imagen-oferta" alt="Imagen de recolección"             *ngFor="let imagen of imagenesEntrega; index as i" [src]="imagen" (click)="verImagen(i, false)">        <button type="button" (click)="verFotosEntrega(); clickedVerFotosEntrega = true;" [disabled]="clickedVerFotosEntrega" class="btn btn-secondary" *ngIf="imagenesEntrega.length == 0">Ver fotos</button>      </div>    </div>  </div>  <div class="card" *ngIf="(envio.envioEstadoId == appConfig.idEnvioPorRecibir || envio.envioEstadoId == appConfig.idEnvioPorEntregar) &&  (_authService.getTypeUser() == appConfig.idUsuarioEnviosAdmin || _authService.getTypeUser() == appConfig.idUsuarioEnvios)">    <h5 class="card-header">Fotos de {{envio.envioEstadoId == appConfig.idEnvioPorRecibir ? "recolección" : "entrega"}} a subir</h5>    <div class="card-body">      <div class="contenedor-imagenes" *ngIf="imagenes.length > 0">        <img [ngClass]="{'imagen-seleccionada': imagenSeleccionada==i}" class="imagen-oferta" alt="Imagen de recolección"             *ngFor="let imagen of imagenes; index as i" [src]="'data:image/jpg;base64,'+imagen.file" (click)="seleccionarImagen(i)">      </div>      <button *ngIf="imagenSeleccionada>=0" type="button" (click)="eliminarImagen()"              class="btn btn-warning mb-4">Eliminar imagen</button>      <input type="file" id="fileStart" (change)="onFileChange($event)" accept="image/*" class="form-control-file subir-archivo" >      <div *ngIf="imagenes.length != 0 || (envio.envioEstadoId == appConfig.idEnvioPorRecibir && imagenesRecoleccionIds.length != 0) ||      (envio.envioEstadoId == appConfig.idEnvioPorEntregar && imagenesEntregaIds.length != 0)" class="mt-3">        <div class="form-check mb-3">          <input type="checkbox" class="form-check-input" id="estadoCompletado" name="estadoCompletado" [(ngModel)]="estadoCompletado">          <label class="form-check-label" for="estadoCompletado">Marcar {{envio.envioEstadoId == appConfig.idEnvioPorRecibir ? "recepción" : "entrega"}} como completada</label>        </div>        <div class="row" *ngIf="estadoCompletado && envio.envioTipo == 'C' && envio.envioEstadoId == appConfig.idEnvioPorEntregar">          <div class="col-md-6 form-group">            <label for="pago">* Pago</label>            <input id="pago" name="pago" #pago="ngModel" class="form-control" [(ngModel)]="envioPago"                   [ngClass]="{'is-invalid': pago.errors  && pago.touched}" required onlyDecimal/>          </div>        </div>        <button type="button" class="btn btn-primary" (click)="guardarFotos()" [disabled]="!forma.valid || deshabilitarGuardar || (imagenes.length == 0 && !estadoCompletado)">Guardar</button>      </div>    </div>  </div>  <div class="mt-5 mb-2">    <button type="button" class="btn btn-secondary" (click)="regresar()">      Regresar    </button>  </div></form><!-- Modal imagenes --><div class="modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"     aria-hidden="true">  <div class="modal-dialog" role="document">    <div class="modal-content">      <div class="modal-header">        <h5 class="modal-title" id="exampleModalLabel" *ngIf="show">Alerta...!</h5>        <button type="button" class="close" data-dismiss="modal" aria-label="Close">          <span aria-hidden="true">&times;</span>        </button>      </div>      <div class="modal-body">        <img class="img-order" width="100%" height="100%" alt="Imagen de recolección"             [src]="verImagenSeleccionada" *ngIf="!show"/>        <div class="alert alert-success" role="alert" *ngIf="show"             [ngClass]="{'alert-success': operacionCorrecta,'alert-danger': !operacionCorrecta}">          <strong>{{mensajeOperacion}}</strong>        </div>      </div>      <div class="modal-footer justify-content-md-center">        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar        </button>      </div>    </div>  </div></div>