<ngx-loading [show]="loading"></ngx-loading>
<form novalidate #forma="ngForm">
  <div class="panel-group">
    <h3 class="text-center m-3">{{idSolicitud}}</h3>

    <div class="card">
      <div class="card-header font-weight-bold">Datos del envío</div>
      <div class="card-body margin">
        <div class="row">
          <div class="col-md-6">
            <h6 class="card-subtitle">Tipo de producto</h6>
            <p class="card-text">{{solicitud.tipo}}</p>
          </div>
          <div class="col-md-6">
            <h6 class="card-subtitle">Número de piezas</h6>
            <p class="card-text">{{solicitud.numeroPiezas}}</p>
          </div>
          <div class="col-md-6">
            <h6 class="card-subtitle">Peso</h6>
            <p class="card-text">{{solicitud.peso}} {{solicitud.tipoPeso}}</p>
          </div>
          <div class="col-md-6">
            <h6 class="card-subtitle">Volúmen</h6>
            <p class="card-text">{{solicitud.volumen}} {{solicitud.tipoVolumen}}</p>
          </div>
          <div class="col-md-6">
            <h6 class="card-subtitle">Estibadores</h6>
            <p class="card-text">{{solicitud.numeroEstibadores}}</p>
          </div>
          <div class="col-md-6" *ngIf="solicitud.observaciones">
            <h6 class="card-subtitle">Observaciones</h6>
            <p class="card-text">{{solicitud.observaciones}}</p>
          </div>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="card-header font-weight-bold">Origen</div>
      <div class="card-body margin">
        <div class="row">
          <div class="col-md-6">
            <h6 class="card-subtitle">Ciudad</h6>
            <p class="card-text">{{solicitud.origen}}</p>
          </div>
          <div class="col-md-6">
            <h6 class="card-subtitle">Dirección</h6>
            <p class="card-text">{{solicitud.direccion}}</p>
          </div>
          <div class="col-md-6">
            <h6 class="card-subtitle">Fecha de recolección</h6>
            <p class="card-text">{{solicitud.fechaEnvio | date: appConfig.formatoFechaHora}}</p>
          </div>
          <div class="col-md-6">
            <h6 class="card-subtitle">Persona entrega</h6>
            <p class="card-text">{{solicitud.personaEntrega}}</p>
          </div>
          <div class="col-md-6">
            <h6 class="card-subtitle">Correo</h6>
            <p class="card-text"><a href="mailto:{{solicitud.correoContacto}}" target="_blank">{{solicitud.correoContacto}}</a></p>
          </div>
          <div class="col-md-6">
            <h6 class="card-subtitle">Teléfono</h6>
            <p class="card-text"><a href="tel:{{solicitud.telefonoContacto}}" target="_blank">{{solicitud.telefonoContacto}}</a></p>
          </div>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="card-header font-weight-bold">Destino</div>
      <div class="card-body margin">
        <div class="row">
          <div class="col-md-6">
            <h6 class="card-subtitle">Ciudad</h6>
            <p class="card-text">{{solicitud.destino}}</p>
          </div>
          <div class="col-md-6">
            <h6 class="card-subtitle">Dirección</h6>
            <p class="card-text">{{solicitud.direccionEntrega}}</p>
          </div>
          <div class="col-md-6">
            <h6 class="card-subtitle">Fecha de entrega</h6>
            <p class="card-text">{{solicitud.fechaEntrega | date: appConfig.formatoFechaHora}}</p>
          </div>
          <div class="col-md-6">
            <h6 class="card-subtitle">Recibe</h6>
            <p class="card-text">{{solicitud.personaRecibe}}</p>
          </div>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="card-header font-weight-bold">Oferta - {{solicitud.offer.amount | currency:'USD':'symbol'}}</div>
      <div class="card-body margin">
        <div class="row">
          <div class="col-12">
            <h6 class="card-subtitle">* Seleccione chofer</h6>
            <select class="form-control" id="idConductor" name="idConductor" [(ngModel)]="offer.idConductor"
                    #idConductor="ngModel" required>
              <option *ngFor="let conductor of conductores" [value]="conductor.conductorId">
                {{conductor.conductorNombre}} {{conductor.conductorApellido}}
              </option>
            </select>
          </div>
          <div class="col-12">
            <h6 class="card-subtitle">* Seleccione vehículo</h6>
            <select class="form-control" id="idVehiculo" name="idVehiculo" [(ngModel)]="offer.idVehiculo"
                    #idVehiculo="ngModel" required>
              <option *ngFor="let vehiculo of vehiculos" [value]="vehiculo.vehiculoId">
                {{vehiculo.vehiculoPlaca}}
              </option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <hr>
    <button type="button" class="btn btn-primary" (click)="updateOfertas()" [disabled]="!forma.valid || bloquearBotonActualizar">Actualizar</button>
    <button type="button" class="btn btn-secondary" routerLink="/panel/ofertas/oferta-aprobada">Regresar</button>

  </div>
</form>
